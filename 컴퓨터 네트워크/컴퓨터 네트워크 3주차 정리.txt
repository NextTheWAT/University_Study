컴퓨터 네트워크 3주차 정리

3.1 유선 LAN

 - 주소지정 (Addressing)
	- MAC주소 : 48bits (6byte)
 - Unicast, Multicast, Broadcast  
	- 발신지 주소는 항상 Unicast  
	- 목적지 주소는 Unicast, Multicast, Broadcast
Unicast - 1대1 통신개념
Broadcast - 1대 다수
Multicast - 특정그룹에만

이더넷 발전

 - 표준 이더넷  
	- 1973년 제록스(Xerox) 社
	- 데이터 전송률: 10 Mbps  
	- 접속 형태: 버스(Bus) 형  - 기본적으로 Broadcast 가 기본
      중요 - 매체접근제어(MAC) 방법: CSMA/CD - 동시에 매체에 접근할때 충돌이
일어나는데 한 순간에 하나의 케이블을 통해 전송해야하는기술이 필요 어떻게 보내야 충돌이
일어나지않고 안전하게 보낼까 그것이 CSMA/CD 이다
	- IEEE 802.3 표준으로 발전

매체접근제어(MAC) : CSMA/CD
 - Carrier Sense Multiple Access / Collison Detection

 - Carrier Sense - A가 만약 프레임을 전송하는중에 B나 C가 데이터를 보낼수없음
		그래서 데이터를 전송하기전 캐리어를 센싱해야함
 - Multiple Access - 캐리어가 없다면 누구든 액세스가 가능 충돌 발생 가능성이 낮다 하지만
		  전파지연이 있기때문에 충돌이 일어날수밖에 없음
		   왜냐 A가 보내는 프레임이 D와 E까지 가지않아서 A쪽에서 보내는 데이터가
		  없는줄 안다 그래서 E가 데이터를 보내게되면 결국 A가보낸 데이터 E가보낸 데이터
		  가 어느지점에서 무조건 충돌을 하게 된다	
 - Collison Detection - A와E가 둘다 전송할때까지 충돌이 일어났음에도 불구하고 끝까지 계속 보냄	
		    그래서 전체적인 데이터기능이 떨어짐 
		    jamming 시그널 을 추가한다 충돌됐다는 신호를 강조해주는 것
	   	    불필요한 전송하는 시간을 아낌으로서 전체적인 신호를 향상시키자 가
		    CSMA/CD 이다

매체접근제어(MAC) : CSMA/CD
 - 데이터를 전송할 sender는 채널을 모니터링 하다가 캐리어가 없을 경우 프레임을 전송
   LAN상의 모든 스테이션 들은 동일한 데이터를 수신한 후 목적지 주소를 체크함
   목적지 스테이션은 전송된 프레임을 복사하고, 그 외 station은 버림
   station 들이 동시에 데이터를 전송할 경우 충돌 발생
   충돌이 감지되면, sender는 임의의 시간동안 전송을 연기 (back off)
   임의의 지연 시간(back-off delay) 후 재전송 시도
   
매체접근제어(MAC) :CSMA/CD
 - Space/Time model
 - 전송지연 (transmission)     
	 - 일반적으로 속도가 빠르다고 느끼는것은 전송지연에서 느껴짐
	 - 데이터를 실어 올린다
	 - 아래로 쭉 내려가는게 데이터를 실어 올리면서 내려가는것(그래프상)
 - 전파지연 (propagation)
	 - 전파지연은 물리적으로 결정이 된다
	 - 케이블을 타고 이동하는속도?
	 - 옆으로 퍼지는게 전파지연

CSMA - 충돌된것을 검출할수있는 기능이 없어서 충돌이 되어도 계속 프레임 데이터를 보냄
	충돌되는 데이터의 양이 많음
CSMA/CD - 충돌되는 시그널이 검출되면 중복되는 구간이 CSMA보다 적다는것
	    충돌되는 데이터량이 적음 불필요한 데이터전송량이 적음
- 충돌을 검출하기 위한 조건 : Tfr > 2Tp
	- 예제 3.3 : 표준 이더넷에서 최대 전파시간이 25.6us일 경우 최소 프렝미 길이는?
		- ex) 10Mbpas x 51.2 us = 512bits (64bytes)
		표준 이더넷 속도 10Mbps
fr 딜레이의 전파하는 시간보다 t 시간의 2배이상이여야 그래야 충돌을 검출할수있다
끝까지 전파되는 프레임을 아직 전송하고 있어야 충돌을 검출하더라도 재전송할수있는 것

@ Jamming signal
	- 전송 중 충돌이 감지되면 데이터 전송을 멈추고
	  32bits의 길이의 01 반복 신호를 전송



3.1 유선 LAN(계속)

 - 이더넷 계열 (IEEE 802.3)의 LAN 방식 비교

A Base-B
A = 전송속
base - 그대로 전송한다는 뜻
B = 최대 segment 길이(100m단위) or 미디어 유형

 - 표준 이더넷 구현
 - 10Base5
	- 여러개의 호스트들이 메인 케이블에 물려 사용됨 AUI 케이블을 사용
 - 10Base2
	- 가는 동축 케이블을 사용 AUI 같은 케이블이 없음
	   10Base5 보다 상대적으로 시그널링에 안정감이 조금 떨어짐
 - 10BaseF
 - 10Base-T
	- 허브에 UTP케이블을 연결해서 사용 100미터를 넘어가면 안됨
	  8개의 구리선, 줄무늬와 줄무늬가 없는 쌍으로 이루어져있음
	  트위스트 되어있다.

 - 고속 이더넷(Fats Ethernet) : IEEE 802.3u
 	- 표준 이더넷과 호환
	- 데이터 전송률 : 100Mbps -> how?
		- 충돌 시그널, 상위계층에서 처리를 해줘야함 속도가 빠르기때문에, 
		  램 카드에 저장을 하지않음 그래서 재전송을 하지않는다
		  10배가 빨리가면 다녀오는 길이를 10분의1로 줄여야함
		  만약 2500m면 250m이 됨 
	- 접속형태: 성형(Star) cf. 버스형x
	- 반이중(Half-duplex)송,수신을 하나만 하는것, 전이중(Full-duplex)송,수신 한 번에 가능
	- 구현
 - CSMA/CD : 통신방식 > 반이중이다
	      어떤 노드가 전송중일때 다른 노드가 전송해서 충돌해서 일어나는 상황을
	      제어하고 문제를 최소화하기위해 필요한것
 - 반이중 통신일때 CSMA/CD가 필요한것
 - 전이중 통신일때는 CSMA/CD가 필요하지 않다.

 - 기가비트 이더넷(Gigabit Ethernet) : IEEE 802.3
	- 표준 및 고속 이더넷과 호환
	- 데이터 전송률 : 1Gbps
	- 대부분 전이중, 반이중은 거의 사용 안함
 - 10기가비트 이더넷 : IEEE 802.3ae
	- 표준, 고속, 기가비트 이더넷과 호환
	- 데이터 전송률, 10Gbps


 - WLAN : IEEE 802.11
 - 구조
	- BSS : Basic Service Set
		- AP가 없는 BSS: 애드훅(Ad_hoc) 구조
			- 독립실행형
		- AP가 있는 BSS: 기반구조
	- ESS : Extended Service Set
		- AP를 가지고 있는 두 개 이상의 BSS로 구성
AP : Access point
ad hoc : 원래는 군사용 목적으로 만들어진 네트워크 구조

3.2 무선 LAN ( Wireless LAN)

- MAC : CSMA/CA vs 유선랜에서는 CSMA/CD
 - Carrier sense Multiple Access with
	Collision Avoidance (충돌회피)
무선 상황에서는 유선상황에서보다 충돌을 검출하는것이 힘들다
망 제어 하는것 자체가 말이 안됨
처음부터 아예 충돌을 일어나지않도록, 회피하자 해서 만들어진게 CSMA/CA
충돌검출이 불가능한 이유는 송신자에게 다시 되돌아와서 충돌의 사실을 인지하는것 자체가 불가능
 - DIFS
 - SIFS
짧게 기다리는것
 - RTS : Request to Sand
 - CTS : Clear to Sand
RTS - 보낼수있도록 허락해달라고 요청하는것이 RTS 수신자한테 확인을 받는것
CTS - 보내도 좋다고 응답하는것
충돌을 회피하기 위한 방법이다 이 두가지 방법이
1. RTS와 CTS를 교환하는것
채널의 상황이 유선보다 무선이 좋지않음
CSMA/CA 에서는 받는쪽에서 
2. 데이터를 다 받았다고 확인 응답 프레임을 보내게 되어있다 그것을 Ack 프레임이라 한다
CTS나 ACK 프레임이 오지않으면 문제가 발생한것으로 생각하여 다시 재전송을 해야함

CSMA/CA와 NAV
 - NAV (Network Allocation Vertor)
A가 B한테 RTS를 보낼때 자기의 데이터량이 얼마인지 알테니까
나는 너에게 앞으로 T라는 시간동안 전송할거야 라고 포함해서 보낸다
B는 그러면 그것을 OK를 함
T시간동안 불필요한 컴퓨팅 파워소모를 줄일수있다
T라는 시간동안 sensing 자체를 하지않음 다른 c와 d는
	- RTS에 채널 점유 시간 포함
	  관련 Station들은 NAV 타이머 설정 (T라는 시간동안)
	- 다른 Station들은 NAV 타이머가 종료될 때까지 채널 감지를 안함
 - Handshaking 기간 동안 충돌
	- RTS/CTS 충돌 -> CTS 수신 불가
교환중에 데이터 충돌이 일어날수있음
 - 재전송을 대비해 단편화 
	(fragmentation)가 유리(권고)
반드시 RTS/CTS 교환을 하는것은 아니다

 - 숨겨진 지국 문제(Hidden station problem)  11p 40분
c는 b에대해 숨겨져있는것 
그래서 b가 a한테 데이터를 전송하고있는데 c가 그것을 모르니
c도 a에 데이터를 보낼수도있다
그래서 a가 두 개의 데이터를 받으니 충돌할수있음
그것이 숨겨진 지국 문제 라고 불린다
- Solution?
B가 A한테 RTS를 보낸다 C는 거리가 멀어 받지못함
A가 B한테 CTS를 보내는데 C도 그 CTS를 받을수있음
무선 상황이라 전파가 사방으로 퍼져나감
C는 B에게 숨겨져있지만 A에게 숨겨져있지않고 C도 CTS를 받아
A가 B에게 전송을 받을것이구나 라고 알수있음

 - 노출된 지국 문제(Exposed station problem)
A가 B한테 RTS를 보냄 C까지도 감
D가 C에게 RTS를 보냄 A까지도 감
D가 C에게 보내는 CTS 프레임이 A가 B에게 보내는 데이터가 그 CTS 프레임과 충돌하는것
C가 A,B 통신에 노출되어 있기 때문이다 C입장에서는 D와 통신을 할수없는 입장이 발생하는것

숨겨진 지국 문제는 해결이되지만 노출된 지국 문제는 해결이 되지않음


3.2_2 블루투스 (Bluetooth)

 - WPAN (Wireless Personal Area Network)
	- IEEE 802.15.1 표준안
	- 2.4GHz, 1Mbps, 10meter 이내
	- 컴퓨터, 프린터, 전화기, 카메라 등을 연결 cf. 키보드, 마우스
 - 구조 : 피고넷 (Piconet) -> 스캐터넷(Scatternet)
하나의 Primary 로 여러개의 Secondary 디바이스를 연결(페어링)
	- 하나의 피코넷은 최대 8개의 노드 수용(Primary 1개 + Secondary 7개)
블루투스 1.0 기준으로 설명한것
2004년도에 2.0 발표
2009년도에 3.0 발표
3.0때 까지는 주로 네트워크 통신속도를 향샹시키자 라는 목표로 했음
1.0때는 1mbps
2.0때는 3mbps
3.0때는 24mbps
2010년도에 4.0이 발표
4.0에는 통신속도보다는 BLE 기술, 에너지소모를 최소로하는 기술을 목표로
2014년 4.2 이 또한 에너지소모를 최소로하는 기술을 업그레이드
	1Mbps , 30m거리 커버
2017년 5.0 발표 기존에 4.2보다 데이터 전송량이 2배 오름 2Mbps
	거리가 4배 이상 오름 120~300m까지 가능하도록 스펙이 나와있음

3.3 점-대-점 광역 통신망
 - Point-to-Point WAN(Wide Area Network)
	- 56K 모뎀
	- DSL (Digital Subscriber Line): ADSL, HDSL, VDSL
	- 케이블 모뎀(Cable Modem)
	- T회선 (T lines) : T1, T3
		T1 - 1.544mbps
		T2 - 45mbps
	- SONET (Synchronous Optical Network)
	- PPP( Point-to-Point) 프로토콜

3.4 교환형 광역 통신망(Switched WAN)
 - 인터넷 백본 네트워크는 보통 교환형 WAN이다.
 - 연결 지향형: 연결 확립 후 식별자 할당
 - 종류
	- X.25
	  - 최초의 교환형 WAN.IP 패킷 전소엥 부적합, 큰 전송 오버헤드
	- 프레임 중계 (Frande realy)
	  - X.25 보다 높은 데이터 전송률, 적은 오버헤드, Bursty data 수용가능
	- ATM (Asynchronous Transfer Mode)

3.5 연결 장치 
 - 연결장치와 OSI 모델 @@@
	- Repeater 
1계층 피지컬레이어에서 사용하는
	- Bridge (L2 Switch)
2계층까지 사용하는 1계층에서도 사용
	- Router (L3 Switch)
3계층까지 사용하는 네트워크 계층에 핵심되는 1,2계층 기능을 다 가지고있음
1,2계층에서도 동작함
	- Gateway
프로토콜 변환 기능까지 가지고있음 서로다른 프로토콜 스택간에 데이터를 교환하는 장비
7계층까지도 사용

 - 리피터(Repeater)(반복하다 는 뜻) cf.Hub
	- OSI 모델의 물리계층 기능을 수행하는 장치
	- 신호의 증폭 재생
계속 반복하다보니 신호가 약해진다 그래서 다시 증폭해서 재생한다 는 뜻
	- 필터링 기능X
필터링이라는 기능은 2계층 이상에서 사용되는 개념이다

 - 브리지(Bridge) / L2 스위치(Switch)  23분 14p
 	- OSI 모델의 물리계층과 데이터 링크 계층의 기능 수행
	- 필터링(Filtering), 포워딩(Forwarding), 학습(Learning)
학습(Learning) : MAC 주소를 학습한다 그것을 맥 주소 테이블(MAC Address table)에 저장한다
브리지가 프레임을 수신할때 어떤 포트에 어떤 맥 주소가 있는지 모른다
학습이 되어있지 않아서
그래서 모든 포트로 다 보내버린다 프레임을 보내는것을 포팅이라고 한다
그래서 모든 포트로 다 보내는것을 Flooding 플로딩 이라고 한다
A의 맥 주소는 1번 포트에 연결되어있는것을 알게된다
1번의 송신자가 DA데이터에 학습이 됨

D가 B에게 프레임을 보내는 상황
B의 맥주소가 학습이 되어있지 않는다 그래서 D로부터 받은 데이터를 플로딩을 하게 됨
D의 맥주소가 4번 포트에 있다는 사실을 학습하게 된다

B가 A에게 프레임을 보내는 상황
브릿지는 A의 맥주소가 현재 학습이 되어있는데 이런 경우는
B로부터 받은 데이터를 A의 맥 주소에만 포워딩을 하고 3,4번 포트에는 보내지않음 이것이 필터링 이다.
그리고 B의 맥주소는 2번포트라는것을 인터페이스 하게된다

C가 D로 보내는 상황
C는 3번포트에 연결되어있다는 것을 학습
D의 맥 주소가 3번 포트에 있다는것이 학습되어있음
그래서 D의 포트로 필터링을하여 다른 포트로는 데이터를 보내지 않음
그것을 블락킹(Blocking) 이라고 한다

MAC 주소는 학습을 하게된다 프레임의 송신자 기준으로 학습을 하게된다
어떤 프레임을 수신했을때 학습되어있는 주소라면 해당되는 포트로만 포워딩을 하고 필터링을 하게된다
목적지의 주소가 학습이 되어있지 않는다면 모든 주소로 포워드를 하는 플러딩을 하게 된다.

 - 라우터(Router) / L3 스위치(Switch)
	- OSI 모델의 물리, 데이터 링크, 네트워크 층의 기능 수행
라우터가 하는 일이 어떤 네트워크에서 다른 네트워크로 이어주는 역할을 하는것이 라우터
라우터는 서로 다른 네트워크를 이어주는 기능을 하는 것
관점에 따라서는 라우터의 기준에서 다른 네트워크를 나눈다고 얘기할수있음

학습이 다 되어있는 상태 L2 계층
A가 B에게 프레임을 전송할때 1번포트를 2번포트로만 포워딩을 해주면된다
그러면 3,4번 포트도 서로 송,수신이 가능함
2계층은 학습된 주소를 바탕으로 해당된 프레임으로만 보내니 영향이 없는 포트끼리는
동시에 다른 프레임을 전송할수있다 예를 들어 1,2번끼리 3,4번끼리 프레임을 보낼수 있는 상태가 됨
L2 : 충돌 도메인(컬리젼 도메인)을 분리한다 라고 한다

100Mbps 속도로 기준으로 예를 들어보자
그럼 1,2,3,4번 포트끼리 전부 100m로 통신이 가능
다른 노드들은 영향을 끼치지않음
일반 허브라면 노드가 많아질수록 1/n로 떨어짐

L3 : 브로드케스트(Broadcats Domain) 도메인을 나눈다
하나의 브로드케스트 도메인은 하나의 네트워크가 되는것
L3는 2계층의 기능까지도 다 포함하고 있기 때문
전체적으로 네트워크가 나뉘면 컬리젼 도메인도 같이 나눠진다

브로드케스트 도메인은 라우터 1대 연결되어있는 인터페이스는 2개이다  15p 40분
그래서 브로드케스트 도메인은 2개이다

컬리젼도메인(충돌 도메인)은 몇개일까
2계층 장비에 의해서 나눠진다
브릿지랑 연결되어있는 컬리젼 도메인은 총 9개이다
BD : 2개
CD : 9개








4주차 실시간 강의 3주차 정리

유선 LAN
IEEE 로 들어서면서 데이터 링크 계층이 LLC, MAC으로 두개가 있다

프레임의 최소, 최대 길이

MAC 주소 48bits = 24(OUI 코드) + 24(시리얼 코드)
유니캐스트, 멀티캐스트,브로드캐스트
48비트중 8번째비트가 0이면 유니캐스트 1이면 멀티캐스트

이더넷의 발전 10M, 100M, 1G, 10G
10배씩 빨라지는데 뭐가 빨리지냐면 데이터를 실어올리는
램 카드가 그만큼 빨라진다는 얘기
전송 속도는 달라지지않음
데이터 전송률의 10Mbps의 M는 10^6이다

제록스사 - DIX(Dec Intel Xerux)

CSMA/CD
충돌이 일어나면 빨리 대처를 하자 최소화하자 라는 뜻
데이터(캐리어)가 있는지 없는지 센싱 : CS
동시에 여러개의 데이터를 보낼수있는 상황 : MA

동시에 펄스파형이 충돌되면 0~5볼트 여야하는데 8~9까지 올라감
그래서 램 카드가 충돌을 감지
그래서 01을 무한으로 보냄 그걸 재밍 시그널 이라 부름
충돌된 시그널이 다시 돌아오면 더이상 프레임에 보낼 데이터가 있다해도 보내지않음

A = 전송률 ,10Mbps
Base
baseband = 변조를 하지않고 보낸다
broadband = 변조를 하고 보낸다
B = 길이

반이중 = 둘다 전송 가능하지만 동시에 두개가 전송할수는 없다
ex) CSMA/CD
전이중 = 두개의 노드가 동시에 전송 가능

고속 이더넷은
반이중, 전이중 둘다 가능
그 말은 CSMA/CD를 쓰기도하고 안쓰기도함

기가비트 이더넷은
대부분 전이중, 반이죽은 사용안함

10기가비트 이더넷
전이중 모드만 사용

CSMA/CA
는 충돌 자체가 안일어나도록 회피를 하자는 뜻
CA : 충돌회피

DIFS(큰 데이터), SIFS(적은 데이터) : 브레이크 타임이라고 생각하면 됨 
쉬는 시간없이 데이터를 보내면 이전과 다음 보낼 데이터가 섞일수가 있음

CSMA/CD 와 CSMA/CA 의 대표적으로 다른 것
RTS - CTS - DATA - ACK

NAV
모니터링 하면서 계속 컴퓨팅 리소스를 하면 낭비를 하기때문에
채널을 점유할 시간을 포함해 타이머를 설정

숨겨진 지국 문제
B - A - C
CTS가 C한테까지 가서 C가
아 B가 A한테 데이터를 보내는구나 하고 알수있음

노출된 지국 문제
RTS, CTS 를 보낸다 하더라도
데이터 충돌이 일어날수있음

연결장치
2계층에서 사용하는 주소 - MAC 주소

