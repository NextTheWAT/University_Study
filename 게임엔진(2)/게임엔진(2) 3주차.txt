게임엔진(2) 3주차


Photon 게임 엔진 (개요)

포톤 (Photon) 네트워크 게임 엔진은 이미 성능이 검증되었고 많은 레퍼런스를 가지고 있음
	- PUN(Photon Unity Networking) : 멀티플레이어 게임용 유니티 패키지
		- 100명의 동시 접속자 까지 무료 서비스

(1) 포톤 리얼타임
	- 다양한 개발 플랫폼에 맞춰진 포톤의 핵심 코어 엔진
(2) 포톤 클라우드
	- 이 엔진을 바탕으로 클라우드 서비스를 제공하는 것으로 서버의 보안, 로드 밸런싱, 
		백업 및 네트워크 트래픽 관리등을 서비스 함
(3) 포톤 서버
	- 물리적인 서버를 직접 운영하는 것


URP : 유니버셜 렌더링 파이프라인

URP
- 범용으로 사용 가능한 렌더링 파이프라인
- 고품질의 렌더링 결과를 PC, 콘솔, 모바일, VR, AR 등 모든 플랫폼에 적용할 수 있음
- @PP(포스트 프로세싱) 기능과 통합되어 다양한 후처리 그래픽 효과를 처리할 수 있다.
- @광원, 역광, 반사, 블러링(흐림) 등 효과 연출

URP 프로젝트 적용 방법
- 프로젝트 템플릿에서 URP를 선택해서 시작하는 방법 (아래 그림)
- 일반 3D 프로젝트를 생성한 다음에 후에 URP 모드로 바꾸는 방법 (본 강의에서 적용하는 방법)

URP 패키지 설치
- 메뉴에서 [Windows] -> [Package Manager]를 선택해 패키지 매니저를 연 후 왼쪽 위의 콤보박스를 [Packages: Unity Registry]로 선택한다.
- 패키지 목록에서 “Universal RP”를 선택하고 [Install] 버튼을 클릭하면 패키지가 설치된다.


포스트 프로세싱 효과

- 포스트 프로세싱 설정
- 포스트 프로세싱이란 렌더링된 결과물(영상, 이미지)에 대한 @후처리 작업을 말한다. 
	카메라가 촬영한 영상 또는 이미지를 스크린에 출력하기 전에 @다양한 필터와 효과를 적용@하는 기술을 말한다. 
	즉, 카메라로 촬영한 후에 처리하는 과정이라는 의미에서 붙여진 용어라 볼 수 있으며 @다양한 후처리 효과를 통해 
	시각적 퀄리티를 높일 수 있다.
- URP 로 설정된 프로세스에서 다음과 같은 포스트 프로세싱은 적용할 수 없다
	- 자동 밝기 기능(Auto Exposure)
	- 안개(Fog)
	- 스크린 공간 반사(Screen Space Reflection)

- 전역적인 포스트 프로세싱을 위한 개체 생성
- 하이어라키 뷰에 우클릭 후 [Volume] -> [Global Volume]을 선택하여 Global Volume오브젝트를 생성한다.

- 생성한 Global Volume은 일반적인 게임오브젝트이며 Volume스크립트 컴포넌트를 포함하고 있다. 
	Volume컴포넌트의 Profile속성 옆에 있는 [New] 버튼을 클릭하면 Global Volume Profile이름으로 
	새로운 프로파일 에셋이 자동으로 생성된다.


비네팅 효과

- 비네팅(Vignetting)효과는 화면의 주변이나 모서리를 어둡게 처리하는 것으로 자연스럽게 화면의 
	가운데 부분으로 시선을 모으는 효과가 있다. 따라서 게임 분야 있어서는 게이머의 몰입도를 
	증가시키는 효과 중 하나로 사용된다.

- 하이어라키 뷰의 Global Volume을 선택한 후 인스펙터 뷰의 Volume컴포넌트 아래에 있는 
	[Add Override]버튼을 클릭해 [Post-processing] -> [Vignette]를 선택한다.

- 비네팅 효과를 추가한 후 Vignette 속성의 Intensity 옵션을 체크하고 슬라이드 바를 조절하면 
	씬 뷰의 외곽 부분이 다음과 같이 어두워지는 것을 확인할 수 있다. 
- Intensity 옵션은 화면의 외곽 부분에 표현할 어두움의 강도 또는 세기를 조절하는 속성이다. 
	비네팅 효과를 확실하게 표현하기 위해 과장된 수치로 적용을 했으나 실제 제작할 게임에서는 
	살짝 어두워진 느낌이 날 정도로만 Intensity속성을 설정한다.

메인 카메라의 포스트 프로세싱 적용

- 하이어라키 뷰에서 Main Camera를 선택한 후 인스펙터 뷰에서 Rendering -> Post Processing 옵션을 체크하면 
	게임 뷰에서도 비네팅이 표현되는 것을 확인할 수 있다. 

스테이지 설치와 라이트 매핑

- 라이트 매핑을 위해 메뉴에서 [Window] -> [Rendering] -> [Lighting] 을 선택해 라이팅 뷰를 연다.
- [Scene] 탭을 선택하고 [New Lighting Setting] 버튼을 클릭해서 라이트 매핑 정보를 저장할 에셋을 생성한다.

- 라이팅 셋팅 에셋을 생성해 연결하면 라이팅 뷰의 Lightmapping Settigs 옵션이 활성화된다. 
- 좀더 빠른 라이트 매핑을 위해 Lightmap Resolution 속성을 기본값인 40에서 10또는 20 정도로 설정한다. 
	라이팅 뷰 아래에 있는 [Generate Lighting] 버튼을 클릭해 라이트 맵 베이킹을 시작한다.


Bloom, Tonemapping효과

Bloom 효과 
- 빛을 받는 물체는 그 주의의 빛을 발산하는 것과 같은 효과를 냄	
- HDR 렌더링과 함께 사용하여 마법이나 꿈속의 세계 같은 느낌을 주는 매우 특징적인 효과

Tonemapping 효과
- HDR(13, 32비트) 이미지를 SDR(8비트)로 변환할 때 사용하는 효과 
- 좀 더 사실적이고 퀄리티가 높은 이미지를 만들어 낼 수 있다.  
- https://bskyvision.com/703 (참고 문헌)

- @라이트 매핑이 완료된 씬에 좀 더 화려한 비주얼을 연출@하기 위해 톤 매핑과 블룸 포스트 프로세싱 효과를 추가한다. 
	하이어라키 뷰에서 Global Volume을 선택한 다음 인스펙터에서 [Add Override] 버튼을 클릭해 Tonemapping을 추가한다.
	Mode 옵션을 체크하고 ACES를 선택한다. 톤매핑은 조명의 밝기를 HDR에서 사람이 인식할 수 있는 범위로 조정하는 
	효과를 말하며 블룸 효과와 같이 사용할 경우 더욱더 좋은 이미지 품질을 낼 수 있다.

- 톤 매핑은 광원의 밝기를 일반적인 값보다 크게 하는 것을 권장한다. 따라서 하이어라키 뷰에서 
	Directional Light 를 선택한 다음 Intensity를 2로 변경하고 Color 값을 청록색 계열로 설정한다.

- 하이어라키 뷰에서 Global Volume 을 선택한 다음 인스펙터에서 [Add Override] 버튼을 클릭해 
	Bloom효과를 마저 추가한다. Intensity 속성은 1.5로 설정한다. 블룸 효과는 광원 주위로 과장되게 
	표현하는 광학효과로 몽환적인 느낌을 주는 효과다.


주인공 캐릭터 설정
- 주인공 프리팹(“AngryBotResources/Prefabs/Player”)을 씬 뷰로 가져와 설정 작업을 진행한다.
- Player프리팹의 Transform값을 다음과 같이 설정한다.
















