컴퓨터그래픽스 13주차


Section 04 지엘의 시점 변환- 시점 변환

모델좌표, 전역좌표, 시점 좌표
모델 행렬, 뷰 행렬

모델좌표 * 모델 행렬 = 전역좌표

전역좌표 * 뷰 행렬 = 시점좌표


단순 시스템 (중요하지않음)

카메라 위치 = 시점 좌표계 원점
전역 좌표계 원점을 향한 방향이 시점 좌표계의 z축
z축에 수직으로 서 있는 면 = 투상면(Projection Plane, View Plane)-
투상면 내부에 뷰 윈도우(View Window) = 카메라 필름 -
시점 좌표계 y축 = 뷰 윈도우의 y축과 평행.
y-z 평면에 수직인 방향으로 x축


Renderman 시스템

카메라가 바라보는 점 = 초점(Focus, Target)-
초점을 향한 방향이 z축
나머지는 단순 시스템과 유사하다. 
z축을 중심으로 카메라가 회전 가능
• 롤링(Roll, Rolling)-
• 초점은 고정한 채 카메라가 시선 방향인 z축을 기준으로 회전


비행 시뮬레이션

Roll = z 축 기준 회전
Pitch = x 축 기준 회전
Yaw = y 축 기준 회전
• 각도 변화에 따라서 새로운 축을 x, y, z축으로 하는 시점 좌표계가 형성
• 조종사의 눈에 보이는 모든 물체는 변화된 새로운 시점 좌표계를 기준으로 변환


지엘의 시점 좌표계
@@
void gluLookAt(GLdouble eyex, GLdouble eyey, GLdouble eyez, 	-- 카메라 위치
GLdouble atx, GLdouble aty, GLdouble atz, 			-- 카메라 시선
GLdouble upx, GLdouble upy, GLdouble upz);			-- 카메라의 방향(정수리 위치?)
파라미터
• 카메라 위치
• 카메라가 바라보는 점, 즉 초점의 위치
• 카메라 기울임(Orientation)

eyex, eyey, eyez: 카메라의 시점(eye) 위치를 나타내는 x, y, z 좌표입니다. 이 좌표는 원하는 시점의 위치를 지정합니다.
atx, aty, atz: 카메라의 시선(at) 위치를 나타내는 x, y, z 좌표입니다. 이 좌표는 카메라가 바라보는 대상의 위치를 지정합니다.
upx, upy, upz: 카메라의 위(up) 벡터를 나타내는 x, y, z 좌표입니다. 이 벡터는 카메라의 방향을 결정하는 데 사용됩니다. 
일반적으로 (0, 1, 0)을 사용하여 카메라의 위 방향을 지정합니다.


시점 좌표, 전역 좌표, 모델 좌표

PWCS = M•PMCS		전역좌표 = 모델좌표 * 모델 행렬?
PVCS = V•PWCS = V•M•PMCS		시점좌표 = 시점변환*
시점변환 함수의 위치
• glMatrixMode(GL_MODELVIEW); 
• glLoadIdentity( ); 						I
• gluLookAt(0.2 0.0, 0.0, 0.0, 0.0, -100.0, 1.0, 1.0, .0); 	V
• glRotatef (45, 0.0, 1.0, 0.0); 				M
• glutWireCube(1.0); 					P(MCS)


CH07

7장. 투상변환과 뷰포트변환
학습목표
• 평행투상과 원근투상의 차이점을 이해한다. 
• 가시부피 설정방식을 이해한다. 
• glOrtho( ) 함수와 gluPerspective( ) 함수 파라미터를 이해한다. 
• 전방 절단면을 되도록 시점에서 멀리 가져가는 이유를 이해한다. 
• 시점좌표, 절단좌표, 정규화 장치좌표, 화면좌표로의 변환과정을 이해한다.,


투상(Projection) = 가시변환(Viewing Transformation)

• 투상면(View Plane, Projectiㅁㅇon Plane)
• 관찰자 위치(View Point, Eye Position)
= 카메라 위치(Camera Position) = 투상중심(COP: Center of Projection)
= 시점좌표계 원점(Origin of VCS)
• 투상선(Projectors): 물체 곳곳을 향함
• 시선(Line of Sight) : WCS원점 또는 초점을 향함
• 투상면(Projection Plane, View Plane)


평행투상(Parallel Projection)
ㅁㅇㅇㅇ====------
시점이 물체로부터 무한대의 거리에 있다고 간주
• 투상선이 평행
• 원래 물체의 평행선은 투상 후에도 평행
• 시점과의 거리에 무관하게 같은 길이의 물체는 같은 길이로 투상
정사투상, 축측투상, 경사투상 등으로 분류


정사투상(Orthographic Projection)

평면도, 입면도, 측면도 등
• 주 평면(Principal Plane): MCS 주축인 x, y, z에 의해 형성되는
x-y, y-z, z-x
• 투상면은 주 평면 중 하나와 평행
투상선은 투상면과 직교
• 원래 물체의 길이를 정확히 보존. 공학도면에 사용
• 투상선이 반드시 투상면과 직교-> 시점위치가 제한됨.


축측투상(Axonometric Projection_

한꺼번에 여러 면을 보여줌
• 투상선은 투상면과 직교. 투상면이 주평면들과 평행하지 않음
축 방향으로 서로 다른 축소율(cf. 정사투상)
• 삼각(삼중형, Trimetric)
 투상면이 임의의 위치.
• 양각(이중형, Dimetric)
 투상면이 2 개의 주 평면에 대해서 대칭적. 
 2개의 축 방향에 대해 동일 축소율
• 등각(동형, Isometric) 
 투상면이 3 개의 주 평면이 만나는 모서리에서 모든 평면에 대해 대칭적으로
놓일 때. 3개의 축 방향에 대해 동일 축소율
Ex. 등각, 양각


경사투상(Oblique Projection)

투상선끼리는 평행
투상면은 시선에 수직이지만 투상선과 직교하지 않음.
고개는 돌리지 않고 눈동자만 돌려서 보는 것과도 흡사


원근투상(Perspective Projection)

시점이 물체로부터 유한한 거리에 있다고 간주
투상선이 시점에서 출발하여 방사선 모양으로 퍼져감.
카메라나 사람의 눈이 물체를 실제로 포착하는 방법

원근감(Depth Feeling) @
• 동일한 크기의 물체라도 시점으로부터 멀리 있는 것은 작게 보이고 가까
운 것은 크게 보임(1점 투시도)

소실점(VP: Vanishing Point) 
• 원근투상 결과 평행선이 만나는 점(시점 높이)
• 소실점의 수
 일점투상(One-point Projection), 이점투상(Two-point Projection), 삼점투상
(Three-point Projection)

원근변환(Perspective Transformation)
• 직선->직선, 평면->평면
• 물체 정점간의 거리에 대한 축소율이 달라짐. (cf. 어파인 변환)


Section 02 지엘의 투상변환-지엘의 평행투상

기본 평행투상
• 모델 좌표, 전역 좌표, 시점 좌표 순서로 변환된 상태
• P, P'은 시점 좌표계 기준의 좌표. 거리 d에 무관하게 동일한 모습
• 특이변환(Singular Transformation): 역변환이 없는 변환
 (x, y, z, 1)에서 (x, y)만 읽어내면 그것이 투상된 2차원 좌표
 깊이 정보를 활용하기 위해서 지엘은 이러한 변환을 가하지 않음
 투상결과 여전히 3차원 좌표가 유지.


가시부피에 의한 평행투상

장면의 범위를 지정할 필요성: 가시부피(View Volume) 
• 전방 절단면(Near Clipping Plane, Near Plane, Front Plane, Hither) 
• 후방 절단면(Far Clipping Plane, Far Plane, Back Plane, Yon)


정규화 가시부피

정규화 가시부피(CVV: Canonical View Volume)
• 가로, 세로, 높이가 2인 정육면체로 투상
• 정규화 변환(Normalization Transformation)
이유
• 평행투상, 원근투상을 동일한 모습의 정규화 가시부피로 변형
 동일 파이프라인 사용
• 정육면체를 기준으로 하면 연산이 간단함. 
• 다양한 해상도의 화면 좌표계로 변환하기가 간단함.


정규화 가시부피 변환

물체에 대한 이동, 크기조절, 반사변환으로 간주
Reflection: 정규화 가시부피는 왼손좌표계
결과적인 좌표계 = 절단 좌표계(CCS: Clip Coordinate System)@


EX) glOrtho(0.0, 4.0, 0.0, 2.0, -1.0, -3.0)인 경우, 원점을 중심으
로 크기가 2인 정육면체로 변환하시오. 즉, 정규화 가시부피로
변환하시오. 도식화하여 설명하시오. (힌트: 일단 가시부피를
구성하는 직육면체의 8개의 정점을 표시하자)
glOrhto(l, r, b, t, n, f)


Q1) p296 코드[6-8]의 차 주전자를 그릴 때 차 주전자가 Z축을 중심으로 45도, -45도 
회전한 것과 같은 결과를 생성하기 위한 glLookAt함수의 파라미터를 각각 쓰시오.
45도 회전을 위한 glLookAt 파라미터:
    gluLookAt(0.0, 0.0, 0.0, 0.0, 0.0, -1.0, 1.0, 1.0, 0.0);

-45도 회전을 위한 glLookAt 파라미터:
    gluLookAt(0.0, 0.0, 0.0, 0.0, 0.0, -1.0, -1.0, 1.0, 0.0);


Q2) p296 코드 [6-8]의 차 주전자가 Z축 중심으로 45도 회전한 결과를 생성하는 프로그래밍 하고 실행하여
결과를 캡쳐하여 보이시오. 단 시점 변환 함수를 사용하지 마시오.	

Q3) 뷰포트로 화면을 4구역으로 정확히 분할 후, 카메라 포지션을 다르게 하여 차 주전자를 그리는
프로그램을 수행하고 캡쳐하여 결과를 보이시오. (유인물 참조)











